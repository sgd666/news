name: Check In

# âœ… ç­¾åˆ°ç»­æœŸï¼šè¿è¡Œæ­¤ workflow å¯é‡ç½® 7 å¤©è®¡æ—¶ï¼Œä¿æŒ "Get Hot News" æ­£å¸¸è¿è¡Œ
# âœ… Renewal: Run this workflow to reset the 7-day timer and keep "Get Hot News" active
#
# ğŸ“Œ æ“ä½œæ–¹æ³• / How to use:
#   1. ç‚¹å‡» "Run workflow" æŒ‰é’® / Click "Run workflow" button
#   2. æ¯ 7 å¤©å†…è‡³å°‘è¿è¡Œä¸€æ¬¡ / Run at least once every 7 days

on:
  schedule:
    # Cron è¡¨è¾¾å¼ç¤ºä¾‹ï¼ˆæ³¨æ„ï¼šGitHub Actions ä½¿ç”¨ UTC æ—¶é—´ï¼ŒåŒ—äº¬æ—¶é—´éœ€è¦å‡ 8 å°æ—¶ï¼‰:
    # - "0 * * * *"         # æ¯å°æ—¶æ•´ç‚¹è¿è¡Œä¸€æ¬¡ï¼ˆå®é™…æœ‰åå·®ï¼‰
    # - "*/30 * * * *"      # æ¯ 30 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
    # - "*/30 0-14 * * *"   # æ¯å¤© UTC 0:00-14:00ï¼ˆåŒ—äº¬æ—¶é—´ 8:00-22:00ï¼‰ï¼Œæ¯ 30 åˆ†é’Ÿè¿è¡Œä¸€æ¬¡
    # - "0 0,6,12,18 * * *" # æ¯å¤© UTC 0:00,6:00,12:00,18:00ï¼ˆåŒ—äº¬æ—¶é—´ 8:00,14:00,20:00,æ¬¡æ—¥2:00ï¼‰
    - cron: "0 2 */3 * *"
  workflow_dispatch:

jobs:
  del_runs:
    runs-on: ubuntu-latest
    permissions:
      actions: write
      contents: read
    steps:
      - name: Delete all workflow runs
        uses: Mattraks/delete-workflow-runs@v2
        with:
          token: ${{ github.token }}
          repository: ${{ github.repository }}
          retain_days: 3
          keep_minimum_runs: 20
          delete_workflow_by_state_pattern: "ALL"
          delete_run_by_conclusion_pattern: "ALL"